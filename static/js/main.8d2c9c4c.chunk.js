(this["webpackJsonpra-9-2"]=this["webpackJsonpra-9-2"]||[]).push([[0],{19:function(e,t,a){e.exports=a(32)},24:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(14),o=a.n(s),r=(a(24),a(4)),l=a(5),u=a(1),m=Object(n.createContext)([]);function i(e){var t=e.url,a=Object(n.useState)(!1),s=Object(u.a)(a,2),o=s[0],r=s[1],l=Object(n.useState)([]),i=Object(u.a)(l,2),p=i[0],d=i[1];return c.a.createElement(m.Provider,{value:{advanced:o,setAdvanced:r,posts:p,setPosts:d,url:t}},e.children)}var p=a(7),d=a.n(p),b=a(9),E=a.n(b),f=a(15);function v(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(),o=Object(u.a)(s,2),r=o[0],l=o[1],m=Object(n.useState)(!1),i=Object(u.a)(m,2),p=i[0],d=i[1];return Object(n.useEffect)((function(){a&&function(){var e=Object(f.a)(E.a.mark((function e(){var t,n,c,s,o,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,t=a.url,n=a.method,c=a.headers,s=a.body,e.next=5,fetch(t,{method:n,headers:c,body:s});case 5:if((o=e.sent).ok||(console.log(o.status,o.body),setError(o.statusText)),204!==o.status){e.next=11;break}l({resolve:"",status:o.status}),e.next=16;break;case 11:return e.next=13,o.json();case 13:r=e.sent,console.log(r),l({resolve:r,status:o.status});case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0);case 21:return e.prev=21,d(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,18,21,24]])})));return function(){return e.apply(this,arguments)}}()(),console.log(r)}),[a]),[a,c,r,p]}function h(e){var t=Object(n.useContext)(m),a=(t.advanced,t.setAdvanced,t.url),s=(t.posts,t.setPosts),o=v(),l=Object(u.a)(o,3),i=(l[0],l[1]),p=l[2];return Object(n.useEffect)((function(){p||i({url:"".concat(a,"posts"),method:"GET"}),p&&s(p.resolve)}),[p]),c.a.createElement("div",null,c.a.createElement("div",{className:"main-top"},c.a.createElement(r.b,{to:"/posts/new",className:"button"},"Create post")),p&&p.resolve.map((function(e){return c.a.createElement(r.b,{to:"/posts/".concat(e.id)},c.a.createElement("div",{className:"item-post",key:e.id},c.a.createElement("div",{className:"item-post-header"},c.a.createElement("div",{className:"item-post-name"},c.a.createElement("span",{className:"name"},"Grudge"),c.a.createElement("span",{className:"time"},d()(e.created).fromNow()))),c.a.createElement("div",{className:"item-post-content"},c.a.createElement("p",null,e.content))))})))}function O(e){var t=Object(n.useContext)(m),a=(t.posts,t.setPosts,t.url),s=Object(n.useState)(),o=Object(u.a)(s,2),r=o[0],l=o[1],i=v(),p=Object(u.a)(i,4),d=(p[0],p[1]),b=p[2],E=(p[3],e.history);return Object(n.useEffect)((function(){b&&E.goBack()}),[b]),c.a.createElement("div",{className:"new-post"},c.a.createElement("div",{className:"top"},c.a.createElement("span",{onClick:function(){E.goBack()}},"\u2716")),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),d({url:"".concat(a,"posts"),method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:0,content:r})})}},c.a.createElement("textarea",{name:"text",onChange:function(e){l(e.target.value)},value:r}),c.a.createElement("div",{className:"submit"},c.a.createElement("button",{type:"submit",className:"button"},"Publish"))))}function j(e){var t=e.match,a=e.history,s=Object(n.useContext)(m),o=s.posts,l=s.url,i=v(),p=Object(u.a)(i,4),b=(p[0],p[1]),E=p[2],f=(p[3],Number(t.params.id)),h=o.find((function(e){return e.id===f}));return Object(n.useEffect)((function(){E&&a.goBack()}),[E]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"item-post",key:h.id},c.a.createElement(r.b,{to:"/",className:"link-back"},"Back"),c.a.createElement("div",{className:"item-post-header"},c.a.createElement("div",null,c.a.createElement("p",{className:"name"},"Grudge"),c.a.createElement("span",{className:"time"},d()(h.created).fromNow()))),c.a.createElement("div",{className:"item-post-content"},c.a.createElement("p",null,h.content)),c.a.createElement("div",{className:"item-post-footer"},c.a.createElement("button",{className:"change button",onClick:function(e){a.push("/posts/change/".concat(f))}},"Edit"),c.a.createElement("button",{className:"remove button",onClick:function(e){b({url:"".concat(l,"posts/").concat(f),method:"DELETE"})}},"Delete"))))}var N=a(18);function g(e){var t=e.match,a=e.history,s=Object(n.useContext)(m),o=s.posts,r=s.setPosts,l=s.url,i=Object(n.useState)(),p=Object(u.a)(i,2),d=p[0],b=p[1],E=v(),f=Object(u.a)(E,4),h=(f[0],f[1]),O=f[2],j=(f[3],Number(t.params.id));return Object(n.useEffect)((function(){var e=o.find((function(e){return e.id===j}));b(e.content),O&&(r((function(e){return e.map((function(e){return e.id===j?Object(N.a)({},e,{content:d}):e}))})),a.goBack())}),[O]),c.a.createElement("div",{className:"change-post"},c.a.createElement("p",null,"Edit post"),c.a.createElement("div",{className:"top"},c.a.createElement("span",{className:"close",onClick:function(){a.goBack()}},"\u2716")),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),h({url:"".concat(l,"posts"),method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:j,content:d})})}},c.a.createElement("textarea",{name:"text",onChange:function(e){b(e.target.value)},value:d}),c.a.createElement("div",{className:"submit"},c.a.createElement("button",{type:"submit",className:"button"},"Save"))))}var k=function(){return c.a.createElement(i,{url:"https://ra-9-2-serv.herokuapp.com/"},c.a.createElement(r.a,null,c.a.createElement("div",null,c.a.createElement(l.c,null,c.a.createElement(l.a,{path:"/posts/new",component:O}),c.a.createElement(l.a,{path:"/posts/change/:id",component:g}),c.a.createElement(l.a,{path:"/posts/:id",component:j}),c.a.createElement(l.a,{path:"/",component:h})))))};o.a.render(c.a.createElement(k,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.8d2c9c4c.chunk.js.map